!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(e){var r=t[s][1][e];return o(r||e)},p,p.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return n.exec(e).slice(1)};r.resolve=function(){for(var r="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,n="/"===s.charAt(0))}return r=t(i(r.split("/"),function(e){return!!e}),!n).join("/"),(n?"/":"")+r||"."},r.normalize=function(e){var n=r.isAbsolute(e),o="/"===s(e,-1);return(e=t(i(e.split("/"),function(e){return!!e}),!n).join("/"))||n||(e="."),e&&o&&(e+="/"),(n?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}for(var o=n(e.split("/")),i=n(t.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};function i(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:2}],2:[function(e,t,r){var n,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var u,p=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?p=u.concat(p):h=-1,p.length&&d())}function d(){if(!l){var e=c(f);l=!0;for(var t=p.length;t;){for(u=p,p=[];++h<t;)u&&u[h].run();h=-1,t=p.length}u=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new _(e,t)),1!==p.length||l||c(d)};function _(e,t){this.fun=e,this.array=t}_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function g(){}i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],3:[function(e,t,r){n=this,o=function(){"use strict";const e=function(e=[]){this.push(...e)};(e.prototype=new Array).limit=1/0,e.prototype.clean=(({stack:e="\nStack not available for "+navigator.userAgent}={})=>e.split("\n").slice(1).filter(e=>e).filter(e=>!/^_____/.test(e)).filter(e=>!/^persistence./.test(e))),e.prototype.add=function(e){return this.push(Object.assign({},e,{timestamp:(new Date).getTime(),stack:this.clean(new Error,"length"===e.key)},e)),this.length>this.limit&&this.splice(this.length-this.limit),this},e.prototype.type=function(t){return new e(this.filter(e=>e.type===t))},e.prototype.key=function(t){return new e(this.filter(e=>{const r=t.split(".").length;return e.key.split(".").slice(0,r).join(".")===t}))},e.prototype.latest=function(t=1/0){return new e(this.filter(e=>(new Date).getTime()-e.timestamp<t))};var t=new e;const r={},n=()=>"undefined"!=typeof window&&"localStorage"in window;r.load=(e=>{if(!n())return;const t=JSON.parse(localStorage.getItem("_____state")||"{}");if(t.data)for(let r in t.data)e[r]=t.data[r]}),r.save=(e=>{if(!n())return;const t=(new Date).getTime(),r=JSON.stringify({timestamp:t,data:e});localStorage.setItem("_____state",r)});const o={},i=["boolean","number","null","undefined","string"],s=(e=[])=>(r,n)=>{if("symbol"==typeof n)return r[n];if("_____history"===n)return t;if("_____listeners"===n)return o;const i=[...e.map(e=>e.property),n].join(".");if(n in r)return t.add({type:"read",key:i}),r[n];if(/^\$/.test(n)){const r=[...e.map(e=>e.property),n.slice(1)||"_____root"].join("."),i=r.split(".").reduce((e,t)=>e[t],u);return t.add({type:"listen",key:r}),o[r]=o[r]||[],(e,t)=>(o[r].push(e),e.setState?e:e(i))}},a=(e=[])=>(n,p,l)=>{if(/^\$/.test(p))throw new Error("The keys that start by $ are reserved and should not be set manually.");if(/^\_\_/.test(p))throw new Error("The keys that start by __ (two underscores) are reserved and should not be set manually.");const h=[...e.map(e=>e.property),p].join("."),f=void 0===n[p]?"create":"update";t.add({type:f,key:h,value:l}),n[p]=l,r.save(u);const d=(e,t)=>{if(i.includes(typeof e)||null===e)return e;if(Array.isArray(e)&&(e=e.map((e,r,n)=>d(e,[...t,{target:n,property:r,value:e}]))),/^\{/.test(JSON.stringify(e)))for(let r in e){const o={target:n,property:r,value:e[r]};e[r]=d(e[r],[...t,o])}return new Proxy(e,{get:s(t),set:a(t),deleteProperty:c(t)})};return n[p]=d(l,[...e,{target:n,property:p,value:l}]),[...e,{target:n,property:p,value:l}].forEach((e,t,r)=>{const n=r.slice(0,t+1).map(e=>e.property).join(".");if(o[n]){const e=n.split(".").reduce((e,t)=>e[t],u);o[n].forEach(t=>{if(t&&t.setState)return t.setState({__state:Math.random()});t(e)})}}),!o._____root||(o._____root.forEach(e=>{if(e&&e.setState)return e.setState({__state:Math.random()});e(u)}),!0)},c=(e=[])=>(n,i)=>{if(/^\$/.test(i))throw new Error("The keys that start by $ are reserved and should not be set manually.");if(/^\_\_/.test(i))throw new Error("The keys that start by __ (two underscores) are reserved and should not be set manually.");const s=[...e.map(e=>e.property),i].join(".");return t.add({type:"delete",key:s}),delete n[i],r.save(u),[...e,{target:n,property:i}].forEach((e,t,r)=>{const n=r.slice(0,t+1).map(e=>e.property).join(".");if(o[n]){const e=n.split(".").reduce((e,t)=>e[t],u);o[n].forEach(t=>t(e))}}),!o._____root||(o._____root.forEach(e=>{if(e&&e.setState)return e.setState({__state:Math.random()});e(u)}),!0)},u=new Proxy({},{get:s(),set:a(),deleteProperty:c()});return r.load(u),u},"object"==typeof r&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):n.state=o();var n,o},{}],4:[function(e,t,r){const n=e("../../state");t.exports=(()=>{$("#config-components").tabs(),$(".viewIf").on("click",function(){$(this).prop("checked")?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear"))}),$(".datePresets").on("click",function(){let e=$("#date_presets").val();$(this).prop("checked")&&"%x"===e?(e="%a, %b %d, %Y",$("#date_use_system_default").html("1")):$(this).prop("checked")||"1"!==$("#date_use_system_default").html()||(e="%x"),$("#date_presets").prop("name","date_preset_old"),$("#date_presets").prop("id","date_presets_old"),$("#date_presets_na").prop("name","date_preset"),$("#date_presets_na").prop("id","date_presets"),$("#date_presets_old").prop("name","date_preset_na"),$("#date_presets_old").prop("id","date_presets_na"),e&&$("#date_presets").val(e)}),$("#configForm").ajaxForm({beforeSubmit(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).prop("disabled","disabled"),$(this).after('<span><img src="images/loading16'+n.components.themeSpinner+'.gif"> Saving...</span>'),$(this).hide()})},success(){setTimeout(()=>{$(".config_submitter").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show()}),$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show(),window.location.href=$("base").attr("href")+"config/providers/"}),$("#email_show").trigger("notify"),$("#prowl_show").trigger("notify")},2e3)}}),$("#api_key").on("click",()=>{$("#api_key").select()}),$("#generate_new_apikey").on("click",()=>{$.get("config/general/generate_api_key",e=>{void 0===e.error?$("#api_key").val(e):alert(e.error)})}),$("#branchCheckout").on("click",()=>{const e="home/branchCheckout?branch="+$("#branchVersion").val();$.getJSON("home/getDBcompare",t=>{"success"===t.status&&("equal"===t.message&&(window.location.href=$("base").attr("href")+e),"upgrade"===t.message&&confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")&&(window.location.href=$("base").attr("href")+e),"downgrade"===t.message&&alert("Can't switch branch as this will result in a database downgrade."))})}),$("#branchForceUpdate").on("click",()=>{$("#branchForceUpdate").prop("disabled",!0),$("#git_reset_branches").prop("disabled",!0),$.getJSON("home/branchForceUpdate",e=>{$("#git_reset_branches").empty(),e.resetBranches.forEach(e=>{$("#git_reset_branches").append('<option value="'+e+'" selected="selected" >'+e+"</option>")}),e.branches.forEach(e=>{$("#git_reset_branches").append('<option value="'+e+'" >'+e+"</option>")}),$("#git_reset_branches").prop("disabled",!1),$("#branchForceUpdate").prop("disabled",!1)})});const e=()=>{const e=parseInt($('input[name="git_auth_type"]').filter(":checked").val(),10);$('div[name="content_github_auth_type"]').each(function(t){t===e?$(this).show():$(this).hide()})};e(),$('input[name="git_auth_type"]').on("click",()=>{e()}),$("#git_token").on("click",()=>{$("#git_token").select()}),$("#create_access_token").popover({placement:"left",html:!0,title:"Github Token",content:'<p>Copy the generated token and paste it in the token input box.</p><p><a href="'+n.config.anonRedirect+'https://github.com/settings/tokens/new?description=Medusa&scopes=user,gist,public_repo" target="_blank"><input class="btn" type="button" value="Continue to Github..."></a></p><br/>'}),$("#manage_tokens").on("click",()=>{window.open(n.config.anonRedirect+"https://github.com/settings/tokens","_blank")})})},{"../../state":5}],5:[function(e,t,r){const n=e("path"),o=e("statux");o.config={},o.auth.apiRoot=o.auth.apiRoot||n.join(document.getElementsByTagName("base")[0].href,"/api/v2/"),o.auth.apiKey=o.auth.apiKey||document.getElementsByTagName("body")[0].getAttribute("api-key"),o.components={loading:"",themeSpinner:""},window.state=o,t.exports=o},{path:1,statux:3}]},{},[4]);
//# sourceMappingURL=init.js.map
