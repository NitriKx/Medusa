!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){var n=t[a][1][e];return o(n||e)},h,h.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return r.exec(e).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,r="/"===a.charAt(0))}return n=t(i(n.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(e){var r=n.isAbsolute(e),o="/"===a(e,-1);return(e=t(i(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}for(var o=r(e.split("/")),i=r(t.split("/")),a=Math.min(o.length,i.length),s=a,l=0;l<a;l++)if(o[l]!==i[l]){s=l;break}var c=[];for(l=s;l<o.length;l++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:2}],2:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var c,h=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?h=c.concat(h):d=-1,h.length&&f())}function f(){if(!u){var e=l(p);u=!0;for(var t=h.length;t;){for(c=h,h=[];++d<t;)c&&c[d].run();d=-1,t=h.length}c=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new m(e,t)),1!==h.length||u||l(f)};function m(e,t){this.fun=e,this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function g(){}i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],3:[function(e,t,n){r=this,o=function(){"use strict";const e=function(e=[]){this.push(...e)};(e.prototype=new Array).limit=1/0,e.prototype.clean=(({stack:e="\nStack not available for "+navigator.userAgent}={})=>e.split("\n").slice(1).filter(e=>e).filter(e=>!/^_____/.test(e)).filter(e=>!/^persistence./.test(e))),e.prototype.add=function(e){return this.push(Object.assign({},e,{timestamp:(new Date).getTime(),stack:this.clean(new Error,"length"===e.key)},e)),this.length>this.limit&&this.splice(this.length-this.limit),this},e.prototype.type=function(t){return new e(this.filter(e=>e.type===t))},e.prototype.key=function(t){return new e(this.filter(e=>{const n=t.split(".").length;return e.key.split(".").slice(0,n).join(".")===t}))},e.prototype.latest=function(t=1/0){return new e(this.filter(e=>(new Date).getTime()-e.timestamp<t))};var t=new e;const n={},r=()=>"undefined"!=typeof window&&"localStorage"in window;n.load=(e=>{if(!r())return;const t=JSON.parse(localStorage.getItem("_____state")||"{}");if(t.data)for(let n in t.data)e[n]=t.data[n]}),n.save=(e=>{if(!r())return;const t=(new Date).getTime(),n=JSON.stringify({timestamp:t,data:e});localStorage.setItem("_____state",n)});const o={},i=["boolean","number","null","undefined","string"],a=(e=[])=>(n,r)=>{if("symbol"==typeof r)return n[r];if("_____history"===r)return t;if("_____listeners"===r)return o;const i=[...e.map(e=>e.property),r].join(".");if(r in n)return t.add({type:"read",key:i}),n[r];if(/^\$/.test(r)){const n=[...e.map(e=>e.property),r.slice(1)||"_____root"].join("."),i=n.split(".").reduce((e,t)=>e[t],c);return t.add({type:"listen",key:n}),o[n]=o[n]||[],(e,t)=>(o[n].push(e),e.setState?e:e(i))}},s=(e=[])=>(r,h,u)=>{if(/^\$/.test(h))throw new Error("The keys that start by $ are reserved and should not be set manually.");if(/^\_\_/.test(h))throw new Error("The keys that start by __ (two underscores) are reserved and should not be set manually.");const d=[...e.map(e=>e.property),h].join("."),p=void 0===r[h]?"create":"update";t.add({type:p,key:d,value:u}),r[h]=u,n.save(c);const f=(e,t)=>{if(i.includes(typeof e)||null===e)return e;if(Array.isArray(e)&&(e=e.map((e,n,r)=>f(e,[...t,{target:r,property:n,value:e}]))),/^\{/.test(JSON.stringify(e)))for(let n in e){const o={target:r,property:n,value:e[n]};e[n]=f(e[n],[...t,o])}return new Proxy(e,{get:a(t),set:s(t),deleteProperty:l(t)})};return r[h]=f(u,[...e,{target:r,property:h,value:u}]),[...e,{target:r,property:h,value:u}].forEach((e,t,n)=>{const r=n.slice(0,t+1).map(e=>e.property).join(".");if(o[r]){const e=r.split(".").reduce((e,t)=>e[t],c);o[r].forEach(t=>{if(t&&t.setState)return t.setState({__state:Math.random()});t(e)})}}),!o._____root||(o._____root.forEach(e=>{if(e&&e.setState)return e.setState({__state:Math.random()});e(c)}),!0)},l=(e=[])=>(r,i)=>{if(/^\$/.test(i))throw new Error("The keys that start by $ are reserved and should not be set manually.");if(/^\_\_/.test(i))throw new Error("The keys that start by __ (two underscores) are reserved and should not be set manually.");const a=[...e.map(e=>e.property),i].join(".");return t.add({type:"delete",key:a}),delete r[i],n.save(c),[...e,{target:r,property:i}].forEach((e,t,n)=>{const r=n.slice(0,t+1).map(e=>e.property).join(".");if(o[r]){const e=r.split(".").reduce((e,t)=>e[t],c);o[r].forEach(t=>t(e))}}),!o._____root||(o._____root.forEach(e=>{if(e&&e.setState)return e.setState({__state:Math.random()});e(c)}),!0)},c=new Proxy({},{get:a(),set:s(),deleteProperty:l()});return n.load(c),c},"object"==typeof n&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):r.state=o();var r,o},{}],4:[function(e,t,n){$("#removeW").on("click",()=>{$("#white option:selected").remove().appendTo("#pool")}),$("#addW").on("click",()=>{$("#pool option:selected").remove().appendTo("#white")}),$("#addB").on("click",()=>{$("#pool option:selected").remove().appendTo("#black")}),$("#removeP").on("click",()=>{$("#pool option:selected").remove()}),$("#removeB").on("click",()=>{$("#black option:selected").remove().appendTo("#pool")}),$("#addToWhite").on("click",()=>{const e=$("#addToPoolText").val();if(""!==e){const t=$("<option>");t.prop("value",e),t.html(e),t.appendTo("#white"),$("#addToPoolText").val("")}}),$("#addToBlack").on("click",()=>{const e=$("#addToPoolText").val();if(""!==e){const t=$("<option>");t.prop("value",e),t.html(e),t.appendTo("#black"),$("#addToPoolText").val("")}}),t.exports={generateBlackWhiteList:()=>{let e=[];$("#white option").each((t,n)=>{e[t]=$(n).val()}),$("#whitelist").val(e.join(",")),e=[],$("#black option").each((t,n)=>{e[t]=$(n).val()}),$("#blacklist").val(e.join(","))},updateBlackWhiteList:e=>{$("#pool").children().remove(),$("#blackwhitelist").show(),e&&$.getJSON("home/fetch_releasegroups",{show_name:e},e=>{"success"===e.result&&$.each(e.groups,(e,t)=>{const n=$("<option>");n.prop("value",t.name),n.html(t.name+" | "+t.rating+" | "+t.range),n.appendTo("#pool")})})}}},{}],5:[function(e,t,n){const r=e("../../state"),{updateBlackWhiteList:o,generateBlackWhiteList:i}=e("../../blackwhite");t.exports=(()=>{const e=()=>{let e,t;e=0!==$("input:radio[name=whichSeries]:checked").length?$("input:radio[name=whichSeries]:checked").val().split("|")[4]:0!==$("input:hidden[name=whichSeries]").length&&0!==$("input:hidden[name=whichSeries]").val().length?$("#providedName").val():"",o(e);let n="Adding show <b>"+e+"</b> into <b>";if(0!==$("#rootDirs option:selected").length){let e=$("#rootDirs option:selected").val();t=e.indexOf("/")>=0?"/":e.indexOf("\\")>=0?"\\":"",e.substr(n.length-1)!==t&&(e+=t),n+=e+="<i>||</i>"+t}else 0!==$("#fullShowPath").length&&0!==$("#fullShowPath").val().length?n+=$("#fullShowPath").val():n+="unknown dir.";n+="</b>",e.length>0?$.get("addShows/sanitizeFileName",{name:e},e=>{$("#displayText").html(n.replace("||",e))}):$("#displayText").html(n.replace("||","??")),(0!==$("#rootDirs option:selected").length||0!==$("#fullShowPath").length&&0!==$("#fullShowPath").val().length)&&0!==$("input:radio[name=whichSeries]:checked").length||0!==$("input:hidden[name=whichSeries]").length&&0!==$("input:hidden[name=whichSeries]").val().length?$("#addShowButton").prop("disabled",!1):$("#addShowButton").prop("disabled",!0)};let t=null;$("#searchName").on("click",()=>{(()=>{if(0===$("#nameToSearch").val().length)return;t&&t.abort();const n=$("#nameToSearch").val().trim()+" on "+$("#providedIndexer option:selected").text()+" in "+$("#indexerLangSelect").val();$("#searchResults").empty().html('<img id="searchingAnim" src="images/loading32'+r.components.themeSpinner+'.gif" height="32" width="32" /> searching '+n+"..."),t=$.ajax({url:"addShows/searchIndexersForShowName",data:{search_term:$("#nameToSearch").val().trim(),lang:$("#indexerLangSelect").val(),indexer:$("#providedIndexer").val()},timeout:1e3*parseInt($("#indexer_timeout").val(),10),dataType:"json",error(){$("#searchResults").empty().html("search timed out, try again or try another indexer")}}).done(t=>{let n=!0,o='<fieldset>\n<legend class="legendStep">Search Results:</legend>\n',i="";0===t.results.length?o+="<b>No results found, try a different search.</b>":($.each(t.results,(e,a)=>{n?(i=" checked",n=!1):i="";const s=a.join("|");if(o+='<input type="radio" id="whichSeries" name="whichSeries" value="'+s.replace(/"/g,"")+'"'+i+" /> ",t.langid&&""!==t.langid&&1===a[1]?o+='<a href="'+r.config.anonRedirect+a[2]+a[3]+"&lid="+t.langid+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+a[4]+"</b></a>":o+='<a href="'+r.config.anonRedirect+a[2]+a[3]+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+a[4]+"</b></a>",null!==a[5]){const e=new Date(a[5]),t=new Date;o+=e>t?" (will debut on "+a[5]+" on "+a[6]+")":" (started on "+a[5]+" on "+a[6]+")"}null!==a[0]&&(o+=" ["+a[0]+"]"),o+="<br>"}),o+="</ul>"),o+="</fieldset>",$("#searchResults").html(o),e(),a.loadsection(0)})})()}),0!==$("#nameToSearch").length&&0!==$("#nameToSearch").val().length&&$("#searchName").click(),$("#addShowButton").on("click",()=>{if(!$('input:radio[name="whichSeries"]:checked').val()&&0!==$('input:hidden[name="whichSeries"]').val().length)return alert("You must choose a show to continue"),!1;i(),$("#addShowForm").submit()}),$("#skipShowButton").on("click",()=>{$("#skipShow").val("1"),$("#addShowForm").submit()}),$("#qualityPreset").on("change",()=>{a.loadsection(2)});const n=e=>{$(".step").each(function(){$.data(this,"section")+1===e&&$(this).click()})};$("#nameToSearch").focus();const a=new formtowizard({formid:"addShowForm",revealfx:["slide",500],oninit(){e(),0!==$("input:hidden[name=whichSeries]").length&&0!==$("#fullShowPath").length&&n(3)}});$("#rootDirText").on("change",e),$("#searchResults").on("change","#whichSeries",e),$("#nameToSearch").on("keyup",e=>{13===e.keyCode&&$("#searchName").click()}),$("#anime").on("change",()=>{e(),a.loadsection(2)}),$("#rootDirs").on("change",()=>{e()})})},{"../../blackwhite":4,"../../state":6}],6:[function(e,t,n){const r=e("path"),o=e("statux");o.config={},o.auth.apiRoot=o.auth.apiRoot||r.join(document.getElementsByTagName("base")[0].href,"/api/v2/"),o.auth.apiKey=o.auth.apiKey||document.getElementsByTagName("body")[0].getAttribute("api-key"),o.components={loading:"",themeSpinner:""},window.state=o,t.exports=o},{path:1,statux:3}]},{},[5]);
//# sourceMappingURL=new-show.js.map
